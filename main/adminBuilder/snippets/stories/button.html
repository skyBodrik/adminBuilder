{{define "button"}}
    <button type="button" id="{{ ._id }}" name="{{ ._fieldName }}" class="btn btn-default">{{ .caption }}</button>
    <script>
            $('#{{ ._id }}').on("click", function () {
                let fields = {{ JSON .fields }};

                let url = "{{ URL .url }}";
                var regex = new RegExp(/^\w:\/\/.+$/i);
                if (!regex.test(url)) {
                    let currentUrl = Url.getPath(location.href);
                    if (currentUrl.slice(-1) == url.slice(0, 1) && url.slice(0, 1) == "/") {
                        url = currentUrl.slice(0, currentUrl.length - 1) + url;
                    } else {
                        url = currentUrl + url;
                    }
                }
                url += Url.getQuery(location.href) == '' ? '?_ajax=1' : '?_ajax=1&' + Url.getQuery(location.href);

                $.ajax({
                    url: url,
                    method: "POST",
                    data: getDataForFieldsByButtonId(fields, $(this).attr('id')),
                    dataType: "json",
                    success: function(data) {
                        if (data['status'] === null) {
                            {{/*var buff = transformToHtml(data['data']['{{ ._fieldName }}'], '{{ ._fullFieldName }}', fieldsDescription);*/}}
                            {{/*$('[name="{{ ._fullFieldName }}"] > .dinamic-content').append(buff);*/}}
                            {{/*$('[name="{{ ._fullFieldName }}"]').DataTable({*/}}
                                {{/*responsive: true,*/}}
                            {{/*});*/}}
                        }
                        console.log(data);
                    }
                });
            });
    </script>
{{end}}